<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="16x16" href="/note/logo/企鹅.png"><link rel="icon" type="image/png" sizes="32x32" href="/note/logo/企鹅.png"><link rel="manifest" href="/manifest.webmanifest"><meta name="application-name" content="VuePress"><meta name="apple-mobile-web-app-title" content="VuePress"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="/note/logo/企鹅.png"><link rel="mask-icon" href="/note/logo/企鹅.png" color="#3eaf7c"><meta name="msapplication-TileColor" content="#3eaf7c"><meta name="theme-color" content="#3eaf7c"><title>gulp | 企鹅的学习笔记</title><meta name="description" content="企鹅的学习笔记">
    <link rel="modulepreload" href="/note/assets/app.65a2891e.js"><link rel="modulepreload" href="/note/assets/gulp.html.3f02f38c.js"><link rel="modulepreload" href="/note/assets/gulp.html.2a181127.js"><link rel="prefetch" href="/note/assets/index.html.17feb7a3.js"><link rel="prefetch" href="/note/assets/index.html.2ef5ffce.js"><link rel="prefetch" href="/note/assets/index.html.c8ef6944.js"><link rel="prefetch" href="/note/assets/index.html.615fd643.js"><link rel="prefetch" href="/note/assets/index.html.1025a744.js"><link rel="prefetch" href="/note/assets/index.html.d10ee209.js"><link rel="prefetch" href="/note/assets/index.html.7de934ad.js"><link rel="prefetch" href="/note/assets/index.html.e55bd897.js"><link rel="prefetch" href="/note/assets/index.html.16d5fe64.js"><link rel="prefetch" href="/note/assets/index.html.7aa4726a.js"><link rel="prefetch" href="/note/assets/index.html.7b389c68.js"><link rel="prefetch" href="/note/assets/animation.html.9bc672b5.js"><link rel="prefetch" href="/note/assets/attribute.html.27e5f42f.js"><link rel="prefetch" href="/note/assets/boxModel.html.1bd4efa1.js"><link rel="prefetch" href="/note/assets/css.html.ee619881.js"><link rel="prefetch" href="/note/assets/css3.html.d6e1c7bd.js"><link rel="prefetch" href="/note/assets/extend.html.bbcdf466.js"><link rel="prefetch" href="/note/assets/font.html.bc72f660.js"><link rel="prefetch" href="/note/assets/selector.html.caa6d35d.js"><link rel="prefetch" href="/note/assets/weight.html.925da1d1.js"><link rel="prefetch" href="/note/assets/extend.html.4542ecae.js"><link rel="prefetch" href="/note/assets/h5.html.6dfb5d82.js"><link rel="prefetch" href="/note/assets/html.html.b6a34a82.js"><link rel="prefetch" href="/note/assets/label.html.27f787c3.js"><link rel="prefetch" href="/note/assets/advanced.html.eaa73938.js"><link rel="prefetch" href="/note/assets/core.html.95d28753.js"><link rel="prefetch" href="/note/assets/eventLoop.html.6b374e8b.js"><link rel="prefetch" href="/note/assets/extend.html.73779678.js"><link rel="prefetch" href="/note/assets/index.html.4c89938f.js"><link rel="prefetch" href="/note/assets/js.html.3c4e17a0.js"><link rel="prefetch" href="/note/assets/index.html.90aba38a.js"><link rel="prefetch" href="/note/assets/index.html.c3f36234.js"><link rel="prefetch" href="/note/assets/vue.html.fdff37b6.js"><link rel="prefetch" href="/note/assets/index.html.50ddb8dd.js"><link rel="prefetch" href="/note/assets/extend.html.079cdb54.js"><link rel="prefetch" href="/note/assets/jq.html.b364e607.js"><link rel="prefetch" href="/note/assets/node.html.131ec419.js"><link rel="prefetch" href="/note/assets/404.html.265028f6.js"><link rel="prefetch" href="/note/assets/index.html.e0c94de6.js"><link rel="prefetch" href="/note/assets/index.html.147d975c.js"><link rel="prefetch" href="/note/assets/index.html.5d33b451.js"><link rel="prefetch" href="/note/assets/index.html.2142dac9.js"><link rel="prefetch" href="/note/assets/index.html.7ef1cf27.js"><link rel="prefetch" href="/note/assets/index.html.ec95ae48.js"><link rel="prefetch" href="/note/assets/index.html.662f3d34.js"><link rel="prefetch" href="/note/assets/index.html.3496ae16.js"><link rel="prefetch" href="/note/assets/index.html.612c493c.js"><link rel="prefetch" href="/note/assets/index.html.db02d747.js"><link rel="prefetch" href="/note/assets/index.html.05ce4d86.js"><link rel="prefetch" href="/note/assets/animation.html.ff639dd9.js"><link rel="prefetch" href="/note/assets/attribute.html.ccd08946.js"><link rel="prefetch" href="/note/assets/boxModel.html.e19d1fbd.js"><link rel="prefetch" href="/note/assets/css.html.c63272ef.js"><link rel="prefetch" href="/note/assets/css3.html.e2a658a4.js"><link rel="prefetch" href="/note/assets/extend.html.9edcf32f.js"><link rel="prefetch" href="/note/assets/font.html.dd4131d1.js"><link rel="prefetch" href="/note/assets/selector.html.60ed8e37.js"><link rel="prefetch" href="/note/assets/weight.html.b729c1a7.js"><link rel="prefetch" href="/note/assets/extend.html.e385a4a6.js"><link rel="prefetch" href="/note/assets/h5.html.a37b0a58.js"><link rel="prefetch" href="/note/assets/html.html.2b4b2a51.js"><link rel="prefetch" href="/note/assets/label.html.cfbf0e4c.js"><link rel="prefetch" href="/note/assets/advanced.html.8e3b3ebc.js"><link rel="prefetch" href="/note/assets/core.html.5f31d882.js"><link rel="prefetch" href="/note/assets/eventLoop.html.728a87f3.js"><link rel="prefetch" href="/note/assets/extend.html.a2e93c2a.js"><link rel="prefetch" href="/note/assets/index.html.08dffd0d.js"><link rel="prefetch" href="/note/assets/js.html.1f8d66b5.js"><link rel="prefetch" href="/note/assets/index.html.43687c27.js"><link rel="prefetch" href="/note/assets/index.html.cc9430ec.js"><link rel="prefetch" href="/note/assets/vue.html.b01377b2.js"><link rel="prefetch" href="/note/assets/index.html.c9c9a92b.js"><link rel="prefetch" href="/note/assets/extend.html.10c44c1d.js"><link rel="prefetch" href="/note/assets/jq.html.d99588f5.js"><link rel="prefetch" href="/note/assets/node.html.c0ffd3c2.js"><link rel="prefetch" href="/note/assets/404.html.336a2ce4.js"><link rel="prefetch" href="/note/assets/404.e4ab0dea.js"><link rel="prefetch" href="/note/assets/Layout.21c817f4.js">
    <link rel="stylesheet" href="/note/assets/style.bddc3939.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/note/" class=""><!----><span class="site-name can-hide">企鹅的学习笔记</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/note/vue3/" class="" aria-label="vue3"><!--[--><!--]--> vue3 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/note/canvas/" class="" aria-label="canvas"><!--[--><!--]--> canvas <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/RuningPenguin/note" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="切换颜色模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/note/vue3/" class="" aria-label="vue3"><!--[--><!--]--> vue3 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/note/canvas/" class="" aria-label="canvas"><!--[--><!--]--> canvas <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/RuningPenguin/note" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">Gulp <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/note/doc/advanced/gulp/gulp.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="gulp"><!--[--><!--]--> gulp <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/note/doc/advanced/gulp/gulp.html#介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/doc/advanced/gulp/gulp.html#gulp的使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="gulp的使用"><!--[--><!--]--> gulp的使用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/doc/advanced/gulp/gulp.html#gulp的常用内置方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="gulp的常用内置方法"><!--[--><!--]--> gulp的常用内置方法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/doc/advanced/gulp/gulp.html#文件路径的写法" class="router-link-active router-link-exact-active sidebar-item" aria-label="文件路径的写法"><!--[--><!--]--> 文件路径的写法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/doc/advanced/gulp/gulp.html#gulp的插件" class="router-link-active router-link-exact-active sidebar-item" aria-label="gulp的插件"><!--[--><!--]--> gulp的插件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/doc/advanced/gulp/gulp.html#es6转es5" class="router-link-active router-link-exact-active sidebar-item" aria-label="ES6转ES5"><!--[--><!--]--> ES6转ES5 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/note/doc/advanced/gulp/gulp.html#服务器插件" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务器插件"><!--[--><!--]--> 服务器插件 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="gulp" tabindex="-1"><a class="header-anchor" href="#gulp" aria-hidden="true">#</a> gulp</h1><ul><li><a href="https://www.gulpjs.com.cn/" target="_blank" rel="noopener noreferrer">官网<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></li></ul><div class="custom-container tip"><p class="custom-container-title">提示</p><ul><li>node的第三方模块</li><li>node的模块开发 - commonJs规范 <ul><li>暴露：<code>module.exports</code></li><li>引入：<code>require()</code></li></ul></li></ul></div><h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍" aria-hidden="true">#</a> 介绍</h2><ul><li>做前端的<strong>自动化工程</strong>，前端自动化工具</li><li>基于node的前端自动化工具（基于流的前端自动化工具）</li><li>自动将文件进行压缩、合并、编译、解析等操作</li><li><strong>常用的前端工具</strong>: gulp，webpack，grunt，browserify</li></ul><h2 id="gulp的使用" tabindex="-1"><a class="header-anchor" href="#gulp的使用" aria-hidden="true">#</a> gulp的使用</h2><ol><li>下载</li></ol><ul><li>安装全局的gulp：<code>npm i gulp -g</code></li><li>测试：<code>gulp -v</code>可以查看全局的gulp版本号</li><li>安装局部的gulp <ul><li>先创建项目环境（文件夹）</li><li>使用命令窗口进入文件夹</li><li><code>npm i gulp -D</code>安装到开发环境</li><li>测试：<code>gulp -v</code>可以查看全局的gulp版本号</li></ul></li></ul><ol start="2"><li><p>创建gulp官方指定的文件: <strong>gulpfile.js</strong></p></li><li><p>在gulpfile.js中引入gulp模块</p><ul><li><code>const gulp = require(&quot;gulp&quot;)</code></li></ul></li><li><p>配置gulpfile.js文件</p><ul><li>遵循node的模块化规范</li><li>定义功能</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>暴露模块</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//  暴露的入口名</span>
exports<span class="token punctuation">.</span>say <span class="token operator">=</span> sayHello<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>// 要暴露的功能 // 在执行时，通过say执行sayHello ``` - 按需执行 - 在命令窗口输入：<code>gulp 入口名</code></p><h2 id="gulp的常用内置方法" tabindex="-1"><a class="header-anchor" href="#gulp的常用内置方法" aria-hidden="true">#</a> gulp的常用内置方法</h2><ul><li><code>src()</code> 查找文件（参数：路径、字符串）</li><li><code>dest()</code> 转存文件（参数：路径、要保存的路径）</li><li><code>watch()</code> 监听文件的变化，执行功能（参数：路径、是个数组）</li><li><code>series()</code> 批量执行，同步执行（参数：要批处理的函数名）</li><li><code>parallel()</code> 批量执行，异步执行（参数：要批处理的函数名） -<code> pipe()</code> <strong>流对象的方法</strong><ul><li>管道方法，用于将流对象传入下一个操作</li><li>实现连缀执行</li><li>参数：要执行的方法</li></ul></li></ul><h2 id="文件路径的写法" tabindex="-1"><a class="header-anchor" href="#文件路径的写法" aria-hidden="true">#</a> 文件路径的写法</h2><ul><li>单个文件：直接文件全称</li><li>多个文件：使用数组包裹</li><li>当前文件夹下，所有文件：<code>&quot;文件夹/*&quot;</code></li><li>当前文件夹下，指定扩展名文件：<code>&quot;文件夹 /*.扩展名&quot;</code></li><li>当前文件夹下，多层子文件夹嵌套：<code>&quot;文件夹 /**/*&quot;</code></li><li>当前文件夹下，指定多个扩展名文件：<code>&quot;文件夹/*.{html,css}&quot;</code></li><li>当前文件夹下，除了莫格文件：<code>&quot;!src/pass.txt&quot;</code>(!路径)</li></ul><h2 id="gulp的插件" tabindex="-1"><a class="header-anchor" href="#gulp的插件" aria-hidden="true">#</a> gulp的插件</h2><ul><li>实现最终的项目处理</li><li>下载</li><li>引入</li><li>在gulp的功能中使用插件</li><li><strong>注意：gulp-uglify压缩不支持ES6语法，需要先将ES6转成ES5之后才能压缩</strong></li></ul><h2 id="es6转es5" tabindex="-1"><a class="header-anchor" href="#es6转es5" aria-hidden="true">#</a> ES6转ES5</h2><ul><li>gulp插件是没有ES6转ES5这个功能的 <ul><li>babel才是住专门的编译工具</li><li>gulp只是提供了支持gulp的插件</li><li>最终的编译还是由bable完成</li></ul></li><li>安装gulp对babel支持 <ul><li><code>npm install gulp-babel</code></li></ul></li><li>安装babel对ES6的支持 <ul><li><code>npm install @babel/core</code></li></ul></li><li>安装说明，将ES6转成ES5 <ul><li><code>npm install @babel/preset-env</code></li></ul></li><li>在gulpFile中使用 <ul><li>引入gulp-babel</li></ul></li><li>定义ES6转ES5的功能</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">stfFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">src</span><span class="token punctuation">(</span><span class="token string">&quot;src/js/*.js&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@babel/env&#39;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;dist/js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
exports<span class="token punctuation">.</span>stf <span class="token operator">=</span> stfFn<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="服务器插件" tabindex="-1"><a class="header-anchor" href="#服务器插件" aria-hidden="true">#</a> 服务器插件</h2><ul><li>服务器插件 <ul><li>gulp-connect</li></ul></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//转存，拷贝</span>
<span class="token keyword">function</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">src</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;./src/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>connect<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//文件转存之后，触发connect插件的刷新功能</span>
<span class="token punctuation">}</span>
exports<span class="token punctuation">.</span>copy <span class="token operator">=</span> copy<span class="token punctuation">;</span>
<span class="token comment">//监听文件变化，实现自动拷贝</span>
<span class="token keyword">function</span> <span class="token function">autoCopy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">&quot;./src/index.html&quot;</span><span class="token punctuation">,</span>copy<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
exports<span class="token punctuation">.</span>autoCopy <span class="token operator">=</span> autoCopy<span class="token punctuation">;</span>
<span class="token comment">//开启服务器,服务器自动刷新</span>
<span class="token keyword">function</span> <span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    connect<span class="token punctuation">.</span><span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">port</span><span class="token operator">:</span><span class="token string">&quot;3333&quot;</span><span class="token punctuation">,</span>        <span class="token comment">//端口</span>
        <span class="token literal-property property">root</span><span class="token operator">:</span><span class="token string">&quot;./dist&quot;</span><span class="token punctuation">,</span>       <span class="token comment">//根目录</span>
        <span class="token literal-property property">livereload</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token comment">//自动刷新，需要给拷贝功能开启每次拷贝都刷新</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
xports<span class="token punctuation">.</span>server <span class="token operator">=</span> server<span class="token punctuation">;</span>
<span class="token comment">//自动刷新需要同时开启服务器与自动拷贝，所以要使用批处理，两个都是异步，所以要使用异步的parallel</span>
exports<span class="token punctuation">.</span>autoServer <span class="token operator">=</span> <span class="token function">parallel</span><span class="token punctuation">(</span>server<span class="token punctuation">,</span>autoCopy<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>跨域插件 <ul><li><code>http-proxy-middleware</code></li><li>是一个对象，有createProxyMiddleware属性，是一个函数，跨域时使用</li></ul></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//跨域服务器</span>
<span class="token keyword">function</span> <span class="token function">crossServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    connect<span class="token punctuation">.</span><span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">port</span><span class="token operator">:</span><span class="token string">&quot;3333&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">root</span><span class="token operator">:</span><span class="token string">&quot;./dist&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">livereload</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token function-variable function">middleware</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">connect<span class="token punctuation">,</span> opt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span>
                <span class="token comment">//跨域模块是一个对象，它的createProxyMiddleware属性是一个函数</span>
                proxy<span class="token punctuation">.</span><span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token string">&quot;/api&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token comment">//接受两个参数，1：前端请求跨域的标志；2：一个对象（配置信息）</span>
                    <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://wanandroid.com/wxarticle&#39;</span><span class="token punctuation">,</span>    <span class="token comment">//代理的目标地址</span>
                    <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span><span class="token punctuation">{</span>    <span class="token comment">//路径重写规则</span>
                        <span class="token string-property property">&#39;^/api&#39;</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
exports<span class="token punctuation">.</span>crossServer <span class="token operator">=</span> crossServer<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>autoCross <span class="token operator">=</span> <span class="token function">parallel</span><span class="token punctuation">(</span>crossServer<span class="token punctuation">,</span>autoCopy<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>有先后顺序，先有服务器插件才有跨域</strong></p></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: codeqie@163.com">wangxu</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/note/assets/app.65a2891e.js" defer></script>
  </body>
</html>
